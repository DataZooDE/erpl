# name: test/sql/sap_bics_search_infoprovider.sql
# description: test whether we can search for infoproviders
# group: [bics]

# Before we load the extension, this will fail
statement error
PRAGMA sap_rfc_ping;
----
Catalog Error: Pragma Function with name sap_rfc_ping does not exist!

# Require statement will ensure this test is run with this extension loaded
require erpel

statement ok
SET sap_ashost = 'vhcalnplci'

statement ok
SET sap_sysnr = '00'

statement ok
SET sap_user = 'DEVELOPER'

statement ok
SET sap_password = 'Bym38tpl'

statement ok
SET sap_client = '001'

statement ok
SET sap_lang = 'EN'

# Confirm describe function works
query IIII
select OBJ_TYPE, OBJ_TEXT, OBJ_TECHNAME, LAST_CHANGED_BY from sap_bics_search_infoprovider(OBJ_TYPE='QUERY', SEARCH='*Monthly Sales*');
----
QU
Monthly Sales by Product Group (Dyn. Date)
0D_FC_NW_C01_Q0007
SAP



# Confirm describe function works
query I
select count(*) from sap_bics_search_infoprovider(OBJ_TYPE='CUBE');
----
377
